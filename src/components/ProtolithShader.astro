---
type Props = {
  class?: string
  id?: string
  palette?: Array<string>
}

const {
  class: className = "",
  id: providedId,
  palette = ["#ff5641", "#cf0177", "#7f38dc"]
} = Astro.props as Props;

const id = providedId ?? `protolith-shader-${Math.random().toString(36).slice(2)}`;
---

<div class={`protolith-shader ${className}`}>
  <canvas
    id={id}
    class="protolith-shader__canvas"
    aria-hidden="true"
    data-protolith-shader
    data-palette={JSON.stringify(palette)}
  ></canvas>
</div>

<style>
  .protolith-shader {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 120px;
    overflow: hidden;
  }

  .protolith-shader__canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  @media (prefers-reduced-motion: reduce) {
    .protolith-shader {
      display: none;
    }
  }
</style>

<script>
  import "../scripts/protolith-shader";
</script>
