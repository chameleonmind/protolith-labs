---
type Props = {
  class?: string
  id?: string
  background?: string
  lineColor?: string
  accentColor?: string
  lineOpacity?: number
  lineDensity?: number
  speed?: number
  mouseStrength?: number
  dprCap?: number
}

const {
  class: className = '',
  id: providedId,
  background = '#f5f7fa',
  lineColor = '#9aa6b2',
  accentColor = '#7f38dc',
  lineOpacity = 0.55,
  lineDensity = 10,
  speed = 0.15,
  mouseStrength = 0.5,
  dprCap = 1.5,
} = Astro.props as Props

const id = providedId ?? `terrain-lines-${Math.random().toString(36).slice(2)}`
---

<div class={`terrain-lines ${className}`}>
  <canvas
    id={id}
    class="terrain-lines__canvas"
    aria-hidden="true"
    data-lines-card-shader
    data-background={background}
    data-line-color={lineColor}
    data-accent-color={accentColor}
    data-line-opacity={lineOpacity}
    data-line-density={lineDensity}
    data-speed={speed}
    data-mouse-strength={mouseStrength}
    data-dpr-cap={dprCap}
  ></canvas>
</div>

<style>
  .terrain-lines {
    width: 100%;
    height: 100%;
    overflow: hidden;
    position: relative;
  }

  .terrain-lines__canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  @media (prefers-reduced-motion: reduce) {
    .terrain-lines {
      display: none;
    }
  }
</style>

<script>
  import "../../scripts/lines-card-shader";
</script>
